{% extends 'base.html' %}
{% load static %}
{% block body %}
            <!--============== MIDDLE SECTION ============== -->
             
            <div class="middle">
         
             <form   method="POST" enctype="multipart/form-data"  action="{% url 'post' %}" class="create-post">
                {% csrf_token %}
                <div class="profile-photo">
                    <img src="{{ user.profile.profile_pic.url }}">
                </div>
                <input type="text"  name ='description' placeholder="What's on your mind {{user.first_name}}?" id="create-post">
                <input name='pic' type="file" class="form-control-file mt-5"  id="imageupload" onchange="getImage(this.value);"> 
                <label for="imageupload"><i class="uil uil-image"></i></label>
                <div id="imageurl"></div>
                <button type="submit" class="btn btn-primary">Post</button>
             </form>
             <!--============== FEEDS ============== -->
              <div class="feeds">
                <!--============== FEED- 1 ============== -->
                {% for post in posts reversed %}
                <div class="feed">
                    <div class="head">
                        <div class="user">
                            <div class="profile-photo">
                                <img src="{{ post.user_name.profile.profile_pic.url }}" alt="">
                            </div>
                            <div class="info">
                                <h3> {{post.user_name.first_name}} </h3>
                                <small> {{post.date_posted}}</small>
                            </div>
                        </div>
                       
                        <div class="menu">
                        <span class="edit">
                            <i class="uil uil-ellipsis-h" onclick="menuToggle();"></i>
                        </span>
                        <div class="menu-content" action="{% url 'postdelete' %}">
                        <ul class="list">
                            {% if post.user_name.first_name == user.first_name %}
                            <li><a><i class="uil uil-trash-alt" ></i>Delete Post</a></li>
                            {% endif %}
                            <li><a  href="{{post.pic}}" download ><i class="uil uil-import"></i>Download</a></li>
                          </ul></div>

                        </div>
                       
                    </div>
                    <div class="caption">
                        <p>{{post.description}}</p>
                    </div>
                    {% if post.pic %}
                    <div class="photo">
                        <img
                          src="{{post.pic.url}}"
                          alt=""
                        />
                    </div>
                    {% comment %} {% elif post.pic.url.endswith('.mp4') %}
                    <video class="photo" controls>
                        <source src="{{post.pic.url}}" type="video/mp4">
                </video> {% endcomment %}
                    {% endif %}
                    <div class="action-button">
                        <div class="interaction-button">
                            {% comment %} {% if liked %}  {% endcomment %}
                            <a href="/likepost?post_id={{post.id}}"><i class="uil uil-heart"></i></a>
                             {% comment %} {% else %} 
                            <a href="/likepost?post_id={{post.id}}"><i class="uil comment-dots" style="color:red; "></i></a>
                            {% endif %} {% endcomment %}
                            <span><i class="uil uil-comment-dots"></i></span>

                        </div>
                    </div>
                    <div class="liked-by">
                        <p><b>{{post.like}}</b> likes</p>
                    </div>
                    {% comment %} <div class="caption">
                        <p> <b>{{post.user_name.first_name}}</b> {{post.description}}</p>
                    </div> {% endcomment %}
                </div>

                  <!--===========END OF FEED ==========-->
                  {% empty %}
                  {% endfor %}

              </div>
             
               <!--===========END OF FEEDS==========-->
            </div>
            {% endblock %}